import{p as F,I as R,m as D,a as $,b as M,c as E,d as U,e as X,g as Y,u as j,t as S,f as q,h as z,i as G,j as H,k as J,l as K,n as O,o as n,M as Q,w as W,v as Z,q as P,V as b,_ as ee,r as oe,s as te,x as ae,y as se,z as A,A as ne,B as le,C as t,D as d,E as r,F as a,G as u,H as g,J as re,K as V,L as h,N as x,O as T,P as ie,Q as ce}from"./index-25cb404b.js";import{V as ue,a as de,b as ge,c as me,d as fe}from"./VNavigationDrawer-9bcdca70.js";import{V as be,a as ve,b as ke}from"./VList-abf4fde2.js";import"./ssrBoot-747246da.js";import"./VDivider-ab78a0b3.js";const ye=F({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:R,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...D(),...$({location:"top end"}),...M(),...E(),...U(),...X({transition:"scale-rotate-transition"})},"VBadge"),I=Y()({name:"VBadge",inheritAttrs:!1,props:ye(),setup(e,m){const{backgroundColorClasses:C,backgroundColorStyles:v}=j(S(e,"color")),{roundedClasses:s}=q(e),{t:w}=z(),{textColorClasses:k,textColorStyles:f}=G(S(e,"textColor")),{themeClasses:y}=H(),{locationStyles:_}=J(e,!0,l=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(l)?+(e.offsetY??0):["left","right"].includes(l)?+(e.offsetX??0):0));return K(()=>{const l=Number(e.content),i=!e.max||isNaN(l)?e.content:l<=+e.max?l:`${e.max}+`,[c,o]=O(m.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return n(e.tag,P({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},o,{style:e.style}),{default:()=>{var B,L;return[n("div",{class:"v-badge__wrapper"},[(L=(B=m.slots).default)==null?void 0:L.call(B),n(Q,{transition:e.transition},{default:()=>{var p,N;return[W(n("span",P({class:["v-badge__badge",y.value,C.value,s.value,k.value],style:[v.value,f.value,e.inline?{}:_.value],"aria-atomic":"true","aria-label":w(e.label,l),"aria-live":"polite",role:"status"},c),[e.dot?void 0:m.slots.badge?(N=(p=m.slots).badge)==null?void 0:N.call(p):e.icon?n(b,{icon:e.icon},null):i]),[[Z,e.modelValue]])]}})])]}})}),{}}});const _e={class:"pa-2"},Ve={__name:"FrontLayout",setup(e){const{apiAuth:m}=ce(),C=oe(),v=te(),s=ae(),{mobile:w}=se(),k=A(()=>w.value),f=ne(!1),y=A(()=>[{to:"/",icon:"mdi-home",text:"首頁",show:!s.isLogin||s.isLogin},{to:"/register",icon:"mdi-account-plus",text:"註冊",show:!s.isLogin},{to:"/login",icon:"mdi-login",text:"登入",show:!s.isLogin},{to:"/cart",icon:"mdi-cart",text:"購物車",show:s.isLogin},{to:"/orders",icon:"mdi-list-box-outline",text:"訂單",show:s.isLogin},{to:"/admin",icon:"mdi-account-cog",text:"管理者",show:s.isLogin&&s.isAdmin}]),_=async()=>{var l,i;try{await m.delete("/users/logout"),s.logout(),v({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:1e3,color:"#8C8987",location:"center"}}),C.push("/")}catch(c){console.log(c);const o=((i=(l=c==null?void 0:c.response)==null?void 0:l.data)==null?void 0:i.message)||"發生錯誤，請稍後再試";v({text:o,showCloseButton:!1,snackbarProps:{timeout:1500,color:"error",location:"center"}})}};return(l,i)=>{const c=le("router-view");return t(),d(g,null,[k.value?(t(),r(ue,{key:0,class:"bg-color",modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=o=>f.value=o),temporary:"",location:"right"},{append:a(()=>[re("div",_e,[V(s).isLogin?(t(),r(h,{key:0,class:"logout-bg-color logout-color",block:"",onClick:_},{default:a(()=>[x("登出")]),_:1})):u("",!0)])]),default:a(()=>[n(be,{nav:""},{default:a(()=>[(t(!0),d(g,null,T(y.value,o=>(t(),d(g,{key:o.to},[o.show?(t(),r(ve,{key:0,class:"color",exact:"",to:o.to},{prepend:a(()=>[n(b,{icon:o.icon},null,8,["icon"])]),append:a(()=>[o.to==="/cart"?(t(),r(I,{key:0,color:"error",content:V(s).cart,inline:""},null,8,["content"])):u("",!0)]),default:a(()=>[n(ke,null,{default:a(()=>[x(ie(o.text),1)]),_:2},1024)]),_:2},1032,["to"])):u("",!0)],64))),128))]),_:1})]),_:1},8,["modelValue"])):u("",!0),n(de,{elevation:24,color:"#403635"},{prepend:a(()=>[n(h,{to:"/",active:!1},{default:a(()=>[n(b,{class:"color"},{default:a(()=>[x("mdi-hand-okay")]),_:1}),n(me,{class:"color"},{default:a(()=>[x("出來喬")]),_:1})]),_:1})]),default:a(()=>[k.value?(t(),r(fe,{key:0,class:"color",onClick:i[1]||(i[1]=o=>f.value=!0)})):(t(),d(g,{key:1},[(t(!0),d(g,null,T(y.value,o=>(t(),d(g,{key:o.to},[o.show?(t(),r(h,{key:0,class:"color",exact:"",to:o.to,icon:o.icon},{default:a(()=>[o.to==="/cart"?(t(),r(I,{key:0,color:"error",content:V(s).cart},{default:a(()=>[o.show?(t(),r(b,{key:0,icon:o.icon},null,8,["icon"])):u("",!0)]),_:2},1032,["content"])):(t(),d(g,{key:1},[o.show?(t(),r(b,{key:0,icon:o.icon},null,8,["icon"])):u("",!0)],64))]),_:2},1032,["to","icon"])):u("",!0)],64))),128)),V(s).isLogin?(t(),r(h,{key:0,icon:"mdi-logout",onClick:_})):u("",!0)],64))]),_:1}),n(ge,null,{default:a(()=>[(t(),r(c,{key:l.$route.path}))]),_:1})],64)}}},Le=ee(Ve,[["__scopeId","data-v-bef47e1b"]]);export{Le as default};
