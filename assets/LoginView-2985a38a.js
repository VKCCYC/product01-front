import{_ as y,r as C,s as B,x as k,C as F,E as I,F as r,Q as L,o as e,K as a,a3 as N,a4 as d,J as V,L as M,N as U,a1 as q,a2 as P}from"./index-4c6fc963.js";import{c as R,a as m,u as T,e as p,V as $}from"./index.esm-ede2464d.js";import{V as A,a as _,b as D}from"./VRow-aab2122c.js";import{V as E}from"./VDivider-c6ecf1ad.js";const J=l=>(q("data-v-49051f82"),l=l(),P(),l),K=J(()=>V("h1",{class:"text-center"},"登入",-1)),Q={class:"text-center"},j={__name:"LoginView",setup(l){const{api:f}=L(),g=C(),i=B(),v=k(),b=R({account:m().required("必填").min(4,"長度太短").max(20,"長度太長"),password:m().required("必填").min(4,"長度太短").max(20,"長度太長")}),{handleSubmit:w,isSubmitting:x}=T({validationSchema:b}),n=p("account"),c=p("password"),h=w(async u=>{var s,o;try{const{data:t}=await f.post("/users/login",{account:u.account,password:u.password});v.login(t.result),i({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:1500,color:"#8C8987",location:"center"}}),g.push("/")}catch(t){console.log(t);const S=((o=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";i({text:S,showCloseButton:!1,snackbarProps:{timeout:1500,color:"error",location:"center"}})}});return(u,s)=>(F(),I(A,{class:"color"},{default:r(()=>[e(D,null,{default:r(()=>[e(_,{cols:"12"},{default:r(()=>[K]),_:1}),e(E),e(_,{cols:"12"},{default:r(()=>[e($,{class:"form",disabled:a(x),onSubmit:N(a(h),["prevent"])},{default:r(()=>[e(d,{class:"my-5",label:"帳號",clearable:"",variant:"outlined",maxlength:"20",minlength:"4",counter:"",modelValue:a(n).value.value,"onUpdate:modelValue":s[0]||(s[0]=o=>a(n).value.value=o),"error-messages":a(n).errorMessage.value},null,8,["modelValue","error-messages"]),e(d,{class:"my-5",label:"密碼",clearable:"",variant:"outlined",maxlength:"20",minlength:"4",counter:"",type:"password",modelValue:a(c).value.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a(c).value.value=o),"error-messages":a(c).errorMessage.value},null,8,["modelValue","error-messages"]),V("div",Q,[e(M,{class:"login",type:"submit"},{default:r(()=>[U("登入")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}},W=y(j,[["__scopeId","data-v-49051f82"]]);export{W as default};
